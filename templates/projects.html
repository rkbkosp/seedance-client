{{ template "header" . }}

<div class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
    <div>
        <h1 class="text-4xl font-normal text-md-sys-color-on-background mb-1" data-i18n="projects.title">Projects</h1>
        <p class="text-md-sys-color-on-surface-variant" data-i18n="projects.subtitle">Manage your video generation
            campaigns</p>
    </div>

    <!-- Floating Action Button style setup for creating project -->
    <div class="w-full md:w-auto p-4 bg-md-sys-color-surface-variant rounded-md3-xl flex items-center gap-2">
        <form action="/projects" method="POST" class="flex w-full gap-2">
            <input type="text" name="name" data-i18n="projects.create.placeholder" placeholder="New Project Name"
                required
                class="flex-1 bg-transparent border-b-2 border-md-sys-color-outline px-2 py-1 focus:outline-none focus:border-md-sys-color-primary transition-colors placeholder-gray-500">
            <button type="submit" class="md3-btn-filled flex items-center gap-2">
                <span class="text-xl font-bold">+</span> <span data-i18n="projects.create.btn">Create</span>
            </button>
        </form>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {{ range .Projects }}
    <div
        class="bg-md-sys-color-surface rounded-md3-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden border border-md-sys-color-outline/10">
        <!-- Card Header -->
        <div class="p-4 pb-2">
            <div class="flex justify-between items-start">
                <h2 class="text-2xl font-normal text-md-sys-color-on-surface truncate">
                    {{ .Name }}
                </h2>
                <!-- Icon Button (Delete) -->
                <form action="/projects/delete/{{ .ID }}" method="POST" onsubmit="return confirm('Are you sure?');">
                    <button type="submit"
                        class="text-md-sys-color-error p-2 rounded-full hover:bg-md-sys-color-error/10 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"
                            fill="currentColor">
                            <path
                                d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z" />
                        </svg>
                    </button>
                </form>
            </div>
            <p class="text-sm text-md-sys-color-on-surface-variant mt-1">
                ID: {{ .ID }} &bull; {{ .CreatedAt.Format "Jan 02, 15:04" }}
            </p>
        </div>

        <!-- Card Actions -->
        <div class="p-4 pt-2 flex justify-end">
            <a href="/projects/{{ .ID }}" class="md3-btn-tonal rounded-full px-6 py-2 no-underline inline-block"
                data-i18n="projects.open">
                Open
            </a>
        </div>
    </div>
    {{ end }}
</div>
<div class="mt-12 bg-md-sys-color-surface rounded-md3-xl shadow-lg border border-md-sys-color-outline/10 p-8">
    <h2 class="text-2xl font-normal text-md-sys-color-on-surface mb-6">Data Monitoring</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- Total Videos -->
        <div class="bg-md-sys-color-surface-variant/30 rounded-lg p-6">
            <h3 class="text-sm font-bold text-md-sys-color-primary mb-2 uppercase tracking-wide">Total Videos</h3>
            <p class="text-3xl font-normal text-md-sys-color-on-surface">{{ .Stats.TotalVideos }}</p>
            <div class="mt-2 text-xs text-md-sys-color-on-surface-variant">
                <div>1.5 Pro: <span class="font-medium">{{ .Stats.TotalVideos15Pro }}</span></div>
                <div>1.0 Pro Fast: <span class="font-medium">{{ .Stats.TotalVideos10Fast }}</span></div>
            </div>
        </div>

        <!-- Token Usage -->
        <div class="bg-md-sys-color-surface-variant/30 rounded-lg p-6">
            <h3 class="text-sm font-bold text-md-sys-color-primary mb-2 uppercase tracking-wide">Total Tokens</h3>
            <p class="text-3xl font-normal text-md-sys-color-on-surface">{{ .Stats.TotalTokenUsage }}</p>
            <p class="mt-2 text-xs text-md-sys-color-on-surface-variant">Output Tokens</p>
        </div>

        <!-- Total Cost -->
        <div class="bg-md-sys-color-surface-variant/30 rounded-lg p-6">
            <h3 class="text-sm font-bold text-md-sys-color-primary mb-2 uppercase tracking-wide">Total Cost</h3>
            <p class="text-3xl font-normal text-md-sys-color-on-surface">¥{{ printf "%.4f" .Stats.TotalCost }}</p>
            <p class="mt-2 text-xs text-md-sys-color-on-surface-variant">Estimated</p>
        </div>

        <!-- Total Savings -->
        <div class="bg-green-50 rounded-lg p-6 border border-green-100">
            <h3 class="text-sm font-bold text-green-700 mb-2 uppercase tracking-wide">Total Savings</h3>
            <p class="text-3xl font-normal text-green-800">¥{{ printf "%.4f" .Stats.TotalSavings }}</p>
            <p class="mt-2 text-xs text-green-600">vs Platform Price</p>
        </div>
    </div>
</div>

{{ template "footer" . }}